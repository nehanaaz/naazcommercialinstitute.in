import{c as it,d as ot,u as Z,M as ut,e as lt,b as ct,f as ft,g as mt,h as N,r as ht,j as pt,k as $,l as tt,n as gt,o as dt,p as yt,q as At,s as St,t as Vt,V as Et,v as vt,w as Mt,x as bt,S as Tt,H as xt,y as j,z as Dt,A as wt,B as Ct}from"./proxy.Dp1r0qd7.js";import{r as R}from"./index.DPV4Kj-g.js";const It=(t,e,n)=>{const s=e-t;return((n-t)%s+s)%s+t};function et(t,e){return it(t)?t[It(0,t.length,e)]:t}class Ot{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e){const n=this.animations.map(s=>s.attachTimeline(e));return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return q(this.animations,"duration")}get iterationDuration(){return q(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function q(t,e){let n=0;for(let s=0;s<t.length;s++){const a=t[s][e];a!==null&&a>n&&(n=a)}return n}class Gt extends Ot{then(e,n){return this.finished.finally(e).then(()=>{})}}function Ft(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],a=t[1+n],i=t[2+n],r=t[3+n],o=ot(a,i,r);return e?o(s):o}function Lt(t){const e=Z(()=>lt(t)),{isStatic:n}=R.useContext(ut);if(n){const[,s]=R.useState(t);R.useEffect(()=>e.on("change",s),[])}return e}function nt(t,e){const n=Lt(e()),s=()=>n.set(e());return s(),ct(()=>{const a=()=>ft.preRender(s,!1,!0),i=t.map(r=>r.on("change",a));return()=>{i.forEach(r=>r()),mt(s)}}),n}function jt(t){N.current=[],t();const e=nt(N.current,t);return N.current=void 0,e}function re(t,e,n,s){if(typeof t=="function")return jt(t);const a=typeof e=="function"?e:Ft(e,n,s);return Array.isArray(t)?J(t,a):J([t],([i])=>a(i))}function J(t,e){const n=Z(()=>[]);return nt(t,()=>{n.length=0;const s=t.length;for(let a=0;a<s;a++)n[a]=t[a].get();return e(n)})}function W(t){return typeof t=="object"&&!Array.isArray(t)}function st(t,e,n,s){return typeof t=="string"&&W(e)?ht(t,n,s):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Kt(t,e,n){return t*(e+1)}function Q(t,e,n,s){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):s.get(e)??t}function Bt(t,e,n){for(let s=0;s<t.length;s++){const a=t[s];a.at>e&&a.at<n&&($(t,a),s--)}}function Nt(t,e,n,s,a,i){Bt(t,a,i);for(let r=0;r<e.length;r++)t.push({value:e[r],at:pt(a,i,s[r]),easing:et(n,r)})}function Rt(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Wt(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const zt="easeInOut";function Pt(t,{defaultTransition:e={},...n}={},s,a){const i=e.duration||.3,r=new Map,o=new Map,p={},S=new Map;let T=0,l=0,O=0;for(let M=0;M<t.length;M++){const m=t[M];if(typeof m=="string"){S.set(m,l);continue}else if(!Array.isArray(m)){S.set(m.name,Q(l,m.at,T,S));continue}let[v,h,c={}]=m;c.at!==void 0&&(l=Q(l,c.at,T,S));let f=0;const b=(g,d,V,x=0,D=0)=>{const u=Ht(g),{delay:K=0,times:y=gt(u),type:B="keyframes",repeat:G,repeatType:ee,repeatDelay:ne=0,...rt}=d;let{ease:E=e.ease||"easeOut",duration:A}=d;const z=typeof K=="function"?K(x,D):K,P=u.length,H=At(B)?B:a?.[B||"keyframes"];if(P<=2&&H){let w=100;if(P===2&&kt(u)){const C=u[1]-u[0];w=Math.abs(C)}const F={...rt};A!==void 0&&(F.duration=St(A));const L=dt(F,w,H);E=L.ease,A=L.duration}A??(A=i);const _=l+z;y.length===1&&y[0]===0&&(y[1]=1);const U=y.length-u.length;if(U>0&&yt(y,U),u.length===1&&u.unshift(null),G){A=Kt(A,G);const w=[...u],F=[...y];E=Array.isArray(E)?[...E]:[E];const L=[...E];for(let C=0;C<G;C++){u.push(...w);for(let I=0;I<w.length;I++)y.push(F[I]+(C+1)),E.push(I===0?"linear":et(L,I-1))}Rt(y,G)}const k=_+A;Nt(V,u,E,y,_,k),f=Math.max(z+A,f),O=Math.max(k,O)};if(tt(v)){const g=X(v,o);b(h,c,Y("default",g))}else{const g=st(v,h,s,p),d=g.length;for(let V=0;V<d;V++){h=h,c=c;const x=g[V],D=X(x,o);for(const u in h)b(h[u],_t(c,u),Y(u,D),V,d)}}T=l,l+=f}return o.forEach((M,m)=>{for(const v in M){const h=M[v];h.sort(Wt);const c=[],f=[],b=[];for(let d=0;d<h.length;d++){const{at:V,value:x,easing:D}=h[d];c.push(x),f.push(Vt(0,O,V)),b.push(D||"easeOut")}f[0]!==0&&(f.unshift(0),c.unshift(c[0]),b.unshift(zt)),f[f.length-1]!==1&&(f.push(1),c.push(null)),r.has(m)||r.set(m,{keyframes:{},transition:{}});const g=r.get(m);g.keyframes[v]=c,g.transition[v]={...e,duration:O,ease:b,times:f,...n}}}),r}function X(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Y(t,e){return e[t]||(e[t]=[]),e[t]}function Ht(t){return Array.isArray(t)?t:[t]}function _t(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const Ut=t=>typeof t=="number",kt=t=>t.every(Ut);function qt(t,e){return t in e}class Jt extends Et{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(qt(n,e)){const s=e[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return vt()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function Qt(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Mt(t)&&!bt(t)?new Tt(e):new xt(e);n.mount(t),j.set(t,n)}function Xt(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Jt(e);n.mount(t),j.set(t,n)}function Yt(t,e){return tt(t)||typeof t=="number"||typeof t=="string"&&!W(e)}function at(t,e,n,s){const a=[];if(Yt(t,e))a.push(Dt(t,W(e)&&e.default||e,n&&(n.default||n)));else{const i=st(t,e,s),r=i.length;for(let o=0;o<r;o++){const p=i[o],S=p instanceof Element?Qt:Xt;j.has(p)||S(p);const T=j.get(p),l={...n};"delay"in l&&typeof l.delay=="function"&&(l.delay=l.delay(o,r)),a.push(...wt(T,{...e,transition:l},{}))}}return a}function Zt(t,e,n){const s=[];return Pt(t,e,n,{spring:Ct}).forEach(({keyframes:i,transition:r},o)=>{s.push(...at(o,i,r))}),s}function $t(t){return Array.isArray(t)&&t.some(Array.isArray)}function te(t){function e(n,s,a){let i=[],r;if($t(n))i=Zt(n,s,t);else{const{onComplete:p,...S}=a||{};typeof p=="function"&&(r=p),i=at(n,s,S,t)}const o=new Gt(i);return r&&o.finished.then(r),t&&(t.animations.push(o),o.finished.then(()=>{$(t.animations,o)})),o}return e}const ie=te();export{Ot as G,re as a,ie as b,nt as c,te as d,Gt as e,et as g,Ft as t,Lt as u,It as w};
