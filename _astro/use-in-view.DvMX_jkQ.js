import{r as g}from"./index.DPV4Kj-g.js";import{r as p}from"./proxy.Dp1r0qd7.js";const E={some:0,all:1};function I(s,r,{root:c,margin:f,amount:t="some"}={}){const u=p(s),n=new WeakMap,a=i=>{i.forEach(e=>{const l=n.get(e.target);if(e.isIntersecting!==!!l)if(e.isIntersecting){const d=r(e.target,e);typeof d=="function"?n.set(e.target,d):o.unobserve(e.target)}else typeof l=="function"&&(l(e),n.delete(e.target))})},o=new IntersectionObserver(a,{root:c,rootMargin:f,threshold:typeof t=="number"?t:E[t]});return u.forEach(i=>o.observe(i)),()=>o.disconnect()}function m(s,{root:r,margin:c,amount:f,once:t=!1,initial:u=!1}={}){const[n,a]=g.useState(u);return g.useEffect(()=>{if(!s.current||t&&n)return;const o=()=>(a(!0),t?void 0:()=>a(!1)),i={root:r&&r.current||void 0,margin:c,amount:f};return I(s.current,o,i)},[r,s,c,t,f]),n}export{I as i,m as u};
